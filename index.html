<!DOCTYPE html>
<html lang="mk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="–ï–ª–µ–∫—Ç—Ä–æ–Ω—Å–∫–∏ –¥–Ω–µ–≤–Ω–∏–∫ –∑–∞ —É–ø—Ä–∞–≤—É–≤–∞—ö–µ —Å–æ –Ω–µ–¥–µ–ª–µ–Ω —Ä–∞—Å–ø–æ—Ä–µ–¥ –Ω–∞ —É—á–µ–Ω–∏—Ü–∏ –∏ –Ω–∞–ø—Ä–µ–¥–æ–∫">
    <meta name="author" content="–ö–∞–±–∏–Ω–µ—Ç –∑–∞ —Å–ª—É—Ö, –≥–æ–≤–æ—Ä, –≥–ª–∞—Å, –∞–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –∏ –∞—É–≥–º–µ–Ω—Ç–∞—Ç–∏–≤–Ω–∞ –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏—ò–∞">
    <title>–ï–ª–µ–∫—Ç—Ä–æ–Ω—Å–∫–∏ –¥–Ω–µ–≤–Ω–∏–∫ - Student Treatment Manager</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìö</text></svg>">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö –ï–ª–µ–∫—Ç—Ä–æ–Ω—Å–∫–∏ –¥–Ω–µ–≤–Ω–∏–∫</h1>
            <h2>–ö–∞–±–∏–Ω–µ—Ç –∑–∞ —Å–ª—É—Ö, –≥–æ–≤–æ—Ä, –≥–ª–∞—Å, –∞–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –∏ –∞—É–≥–º–µ–Ω—Ç–∞—Ç–∏–≤–Ω–∞ –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏—ò–∞</h2>
            <p>–°–∏—Å—Ç–µ–º –∑–∞ —É–ø—Ä–∞–≤—É–≤–∞—ö–µ —Å–æ –Ω–µ–¥–µ–ª–µ–Ω —Ä–∞—Å–ø–æ—Ä–µ–¥ –Ω–∞ —É—á–µ–Ω–∏—Ü–∏ –∏ –Ω–∞–ø—Ä–µ–¥–æ–∫ –≤–æ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∏–æ—Ç –ø–ª–∞–Ω</p>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('students')">–°—Ç—É–¥–µ–Ω—Ç–∏</button>
            <button class="tab" onclick="switchTab('schedule')">–†–∞—Å–ø–æ—Ä–µ–¥</button>
            <button class="tab" onclick="switchTab('progress')">–ù–∞–ø—Ä–µ–¥–æ–∫</button>
            <button class="tab" onclick="switchTab('plans')">–ü–ª–∞–Ω–æ–≤–∏</button>
            <button class="tab" onclick="switchTab('data')">–ü–æ–¥–∞—Ç–æ—Ü–∏</button>
        </div>
        
        <div class="content">
            <!-- Students Tab -->
            <div id="students" class="tab-content active">
                <div class="mobile-actions">
                    <button class="btn btn-primary" onclick="showAddStudentModal()">+ –î–æ–¥–∞–¥–∏ –°—Ç—É–¥–µ–Ω—Ç</button>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h2 id="totalStudents">0</h2>
                        <p>–í–∫—É–ø–Ω–æ –°—Ç—É–¥–µ–Ω—Ç–∏</p>
                    </div>
                    <div class="stat-card">
                        <h2 id="totalSessions">0</h2>
                        <p>–°–µ—Å–∏–∏ –ù–µ–¥–µ–ª–Ω–æ</p>
                    </div>
                </div>
                
                <div id="studentList"></div>
            </div>
            
            <!-- Schedule Tab -->
            <div id="schedule" class="tab-content">
                <div class="mobile-actions">
                    <button class="btn btn-success" onclick="saveSchedule()">üíæ –ó–∞—á—É–≤–∞—ò</button>
                    <button class="btn btn-secondary" onclick="clearSchedule()">üóëÔ∏è –ò–∑–±—Ä–∏—à–∏</button>
                </div>
                <div id="scheduleGrid"></div>
            </div>
            
            <!-- Progress Tab -->
            <div id="progress" class="tab-content">
                <h2 style="margin-bottom: 15px;">–°–ª–µ–¥–µ—ö–µ –Ω–∞ –ù–∞–ø—Ä–µ–¥–æ–∫</h2>
                
                <div class="mobile-actions">
                    <button class="btn btn-primary" onclick="switchProgressView('individual')">–ü–æ –°—Ç—É–¥–µ–Ω—Ç</button>
                    <button class="btn btn-success" onclick="switchProgressView('monthly')">–ú–µ—Å–µ—á–µ–Ω</button>
                </div>
                
                <div id="individualProgressView">
                    <div class="form-group">
                        <label>–ò–∑–±–µ—Ä–∏ –°—Ç—É–¥–µ–Ω—Ç:</label>
                        <select id="progressStudentSelect" onchange="loadStudentProgress()">
                            <option value="">-- –ò–∑–±–µ—Ä–∏ —Å—Ç—É–¥–µ–Ω—Ç --</option>
                        </select>
                    </div>
                    <div id="progressContainer"></div>
                </div>
                
                <div id="monthlyProgressView" style="display: none;">
                    <div class="form-group">
                        <label>–ò–∑–±–µ—Ä–∏ –ú–µ—Å–µ—Ü:</label>
                        <input type="month" id="monthSelector" onchange="loadMonthlyProgress()">
                    </div>
                    <div id="monthlyContainer"></div>
                </div>
            </div>
            
            <!-- Plans Tab -->
            <div id="plans" class="tab-content">
                <div class="mobile-actions">
                    <button class="btn btn-primary" onclick="showUploadPlanModal()">üìÑ –í—á–∏—Ç–∞—ò Excel</button>
                    <button class="btn btn-success" onclick="showAddActivityModal()">+ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç</button>
                    <button class="btn btn-secondary" onclick="showCreatePlanModal()">üìù –ù–æ–≤ –ü–ª–∞–Ω</button>
                </div>
                <div id="planTemplateList"></div>
            </div>
            
            <!-- Data Tab -->
            <div id="data" class="tab-content">
                <div class="export-section">
                    <h2 style="margin-bottom: 15px;">üì§ –ï–∫—Å–ø–æ—Ä—Ç / –ò–º–ø–æ—Ä—Ç</h2>
                    <div class="mobile-actions">
                        <button class="btn btn-success" onclick="exportData()">üíæ –ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞—ò</button>
                        <button class="btn btn-primary" onclick="document.getElementById('importFile').click()">üìÅ –ò–º–ø–æ—Ä—Ç–∏—Ä–∞—ò</button>
                    </div>
                    <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData(event)">
                </div>
                
                <div class="export-section">
                    <h2 style="margin-bottom: 15px;">üìä –ò–∑–≤–µ—à—Ç–∞–∏</h2>
                    <div class="mobile-actions">
                        <button class="btn btn-primary" onclick="generateScheduleReport()">üìÖ –†–∞—Å–ø–æ—Ä–µ–¥</button>
                        <button class="btn btn-success" onclick="generateProgressReport()">üìà –ù–∞–ø—Ä–µ–¥–æ–∫</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add/Edit Student Modal -->
    <div id="addStudentModal" class="modal">
        <div class="modal-content">
            <h2 style="margin-bottom: 15px;">–î–æ–¥–∞–¥–∏/–ò–∑–º–µ–Ω–∏ –°—Ç—É–¥–µ–Ω—Ç</h2>
            <div class="form-group">
                <label>–ò–º–µ –∏ –ü—Ä–µ–∑–∏–º–µ</label>
                <input type="text" id="studentName" placeholder="–ø—Ä. –ú–∞—Ä–∏—ò–∞ –ß–∞–¥–∞–º–æ–≤–∞">
            </div>
            <div class="form-group">
                <label>–û–¥–¥–µ–ª–µ–Ω–∏–µ</label>
                <input type="text" id="studentGrade" placeholder="–ø—Ä. VI-–∞">
            </div>
            <div class="form-group">
                <label>–¢–∏–ø –ü–ª–∞–Ω (1-6)</label>
                <select id="studentPlanType">
                    <option value="1">–ü–ª–∞–Ω 1</option>
                    <option value="2">–ü–ª–∞–Ω 2</option>
                    <option value="3">–ü–ª–∞–Ω 3</option>
                    <option value="4">–ü–ª–∞–Ω 4</option>
                    <option value="5">–ü–ª–∞–Ω 5</option>
                    <option value="6">–ü–ª–∞–Ω 6</option>
                </select>
            </div>
            <div style="margin-top: 20px; display: flex; gap: 10px;">
                <button class="btn btn-success" style="flex: 1;" onclick="saveStudent()">–ó–∞—á—É–≤–∞—ò</button>
                <button class="btn btn-secondary" style="flex: 1;" onclick="closeModal('addStudentModal')">–û—Ç–∫–∞–∂–∏</button>
            </div>
        </div>
    </div>
    
    <!-- Schedule Modal -->
    <div id="scheduleModal" class="modal">
        <div class="modal-content">
            <h2 style="margin-bottom: 15px;">–î–æ–¥–µ–ª–µ—Ç–µ –°—Ç—É–¥–µ–Ω—Ç–∏</h2>
            <p style="margin-bottom: 15px; color: #718096;">–ò–∑–±–µ—Ä–µ—Ç–µ –µ–¥–µ–Ω –∏–ª–∏ –ø–æ–≤–µ—ú–µ —Å—Ç—É–¥–µ–Ω—Ç–∏ –∑–∞ –æ–≤–æ—ò —Ç–µ—Ä–º–∏–Ω</p>
            <div id="studentCheckboxList" class="student-checkbox-list"></div>
            <div style="margin-top: 20px; display: flex; gap: 10px;">
                <button class="btn btn-success" style="flex: 1;" onclick="assignStudentsToSlot()">–ó–∞—á—É–≤–∞—ò</button>
                <button class="btn btn-secondary" style="flex: 1;" onclick="closeModal('scheduleModal')">–û—Ç–∫–∞–∂–∏</button>
            </div>
        </div>
    </div>

    <!-- Add Activity Modal -->
    <div id="addActivityModal" class="modal">
        <div class="modal-content">
            <h2 style="margin-bottom: 15px;">–î–æ–¥–∞–¥–∏ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç</h2>
            <div class="form-group">
                <label>–ü–ª–∞–Ω –¢–∏–ø (1-6)</label>
                <select id="activityPlanType">
                    <option value="1">–ü–ª–∞–Ω 1</option>
                    <option value="2">–ü–ª–∞–Ω 2</option>
                    <option value="3">–ü–ª–∞–Ω 3</option>
                    <option value="4">–ü–ª–∞–Ω 4</option>
                    <option value="5">–ü–ª–∞–Ω 5</option>
                    <option value="6">–ü–ª–∞–Ω 6</option>
                </select>
            </div>
            <div class="form-group">
                <label>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç</label>
                <textarea id="activityText" rows="3" placeholder="–í–Ω–µ—Å–µ—Ç–µ —Ç–µ–∫—Å—Ç –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç"></textarea>
            </div>
            <div style="margin-top: 20px; display: flex; gap: 10px;">
                <button class="btn btn-success" style="flex: 1;" onclick="addActivity()">–î–æ–¥–∞–¥–∏</button>
                <button class="btn btn-secondary" style="flex: 1;" onclick="closeModal('addActivityModal')">–û—Ç–∫–∞–∂–∏</button>
            </div>
        </div>
    </div>

    <!-- Upload Plan Modal -->
    <div id="uploadPlanModal" class="modal">
        <div class="modal-content">
            <h2 style="margin-bottom: 15px;">–í—á–∏—Ç–∞—ò –ü–ª–∞–Ω –æ–¥ Excel</h2>
            <div class="form-group">
                <label>–ò–∑–±–µ—Ä–∏ –ü–ª–∞–Ω –¢–∏–ø (1-6)</label>
                <select id="uploadPlanType">
                    <option value="1">–ü–ª–∞–Ω 1</option>
                    <option value="2">–ü–ª–∞–Ω 2</option>
                    <option value="3">–ü–ª–∞–Ω 3</option>
                    <option value="4">–ü–ª–∞–Ω 4</option>
                    <option value="5">–ü–ª–∞–Ω 5</option>
                    <option value="6">–ü–ª–∞–Ω 6</option>
                </select>
            </div>
            <div class="form-group">
                <label>–ò–∑–±–µ—Ä–∏ Excel –¥–∞—Ç–æ—Ç–µ–∫–∞</label>
                <input type="file" id="uploadPlanFile" accept=".xlsx,.xls,.csv">
            </div>
            <p style="color: #718096; font-size: 14px; margin: 15px 0;">
                –ó–∞–±–µ–ª–µ—à–∫–∞: –°–∏—Å—Ç–µ–º–æ—Ç —ú–µ –≥–∏ –≤—á–∏—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏—Ç–µ –æ–¥ –∫–æ–ª–æ–Ω–∞ B –≤–æ –ø—Ä–≤–∏–æ—Ç sheet.
            </p>
            <div style="margin-top: 20px; display: flex; gap: 10px;">
                <button class="btn btn-success" style="flex: 1;" onclick="uploadPlanFile()">–í—á–∏—Ç–∞—ò</button>
                <button class="btn btn-secondary" style="flex: 1;" onclick="closeModal('uploadPlanModal')">–û—Ç–∫–∞–∂–∏</button>
            </div>
        </div>
    </div>

    <!-- Create Plan Modal -->
    <div id="createPlanModal" class="modal">
        <div class="modal-content">
            <h2 style="margin-bottom: 15px;">–ö—Ä–µ–∏—Ä–∞—ò –ù–æ–≤ –ü–ª–∞–Ω</h2>
            <div class="form-group">
                <label>–ü–ª–∞–Ω –¢–∏–ø (1-6)</label>
                <select id="createPlanType">
                    <option value="1">–ü–ª–∞–Ω 1</option>
                    <option value="2">–ü–ª–∞–Ω 2</option>
                    <option value="3">–ü–ª–∞–Ω 3</option>
                    <option value="4">–ü–ª–∞–Ω 4</option>
                    <option value="5">–ü–ª–∞–Ω 5</option>
                    <option value="6">–ü–ª–∞–Ω 6</option>
                </select>
            </div>
            <div class="form-group">
                <label>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–µ–¥–Ω–∞ –ø–æ —Ä–µ–¥)</label>
                <textarea id="createPlanActivities" rows="12" placeholder="–í–Ω–µ—Å–µ—Ç–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –µ–¥–Ω–∞ –ø–æ —Ä–µ–¥...
–ü—Ä–∏–º–µ—Ä:
–ß–∏—Ç–∞—ö–µ –∏ –ø–∏—à—É–≤–∞—ö–µ –Ω–∞ –∑–±–æ—Ä–æ–≤–∏ —Å–æ –±—É–∫–≤–∞—Ç–∞ –ê
–£—á–∏–ª–∏—à—Ç–µ-–≥–æ–≤–æ—Ä–Ω–∞ –≤–µ–∂–±–∞
–ò–∑–º–∏–Ω—É–≤–∞ –ø—Ä–µ–ø—Ä–µ–∫–∏"></textarea>
            </div>
            <div style="margin-top: 20px; display: flex; gap: 10px;">
                <button class="btn btn-success" style="flex: 1;" onclick="createPlan()">–ö—Ä–µ–∏—Ä–∞—ò –ü–ª–∞–Ω</button>
                <button class="btn btn-secondary" style="flex: 1;" onclick="closeModal('createPlanModal')">–û—Ç–∫–∞–∂–∏</button>
            </div>
        </div>
    </div>

    <!-- Edit Plan Modal -->
    <div id="editPlanModal" class="modal">
        <div class="modal-content">
            <h2 style="margin-bottom: 15px;">–ò–∑–º–µ–Ω–∏ –ü–ª–∞–Ω <span id="editPlanNumber"></span></h2>
            <div class="form-group">
                <label>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–µ–¥–Ω–∞ –ø–æ —Ä–µ–¥)</label>
                <textarea id="editPlanActivities" rows="12"></textarea>
            </div>
            <div style="margin-top: 20px; display: flex; flex-wrap: wrap; gap: 10px;">
                <button class="btn btn-success" style="flex: 1;" onclick="savePlanEdit()">–ó–∞—á—É–≤–∞—ò</button>
                <button class="btn btn-danger" style="flex: 1;" onclick="deletePlan()">–ò–∑–±—Ä–∏—à–∏ –ü–ª–∞–Ω</button>
                <button class="btn btn-secondary" style="flex: 1;" onclick="closeModal('editPlanModal')">–û—Ç–∫–∞–∂–∏</button>
            </div>
        </div>
    </div>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <!-- Main Application Scripts -->
    <script src="script.js"></script>
    <script src="app.js"></script>
</body>
</html>
